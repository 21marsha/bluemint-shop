<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesanan Berhasil | Bluemint</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <style>
        .success-container {
            padding: 100px 5% 80px;
            max-width: 800px;
            margin: auto;
            text-align: center;
            border: 2px solid #28a745;
            border-radius: 10px;
            background-color: #f1fff5;
            margin-top: 50px;
        }

        .success-container i.fa-check-circle {
            font-size: 5rem;
            color: #28a745;
            margin-bottom: 20px;
        }

        .order-details {
            margin-top: 30px;
            padding: 15px;
            background: #e9fbe9;
            border-radius: 8px;
            text-align: left;
        }

        .order-details strong {
            display: inline-block;
            width: 180px;
            color: #1c7430;
        }

        #payment-code-detail {
            margin-top: 15px;
            padding: 10px;
            border: 1px dashed #28a745;
            background: #fff;
        }

        .highlight-total {
            font-size: 1.3rem;
            font-weight: bold;
            color: #d9534f;
        }
    </style>
</head>

<body>

    <header>
        <nav class="navbar">
            <div class="nav-logo">
                <a href="index.html" class="logo-text">üõçÔ∏èBluemint</a>
            </div>

            <i id="menu-open-button" class="fas fa-bars"></i>

            <ul class="nav-menu">
                <i id="menu-close-button" class="fas fa-times"></i>
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="lookbook.html" class="nav-link">Lookbook</a></li>
                <li><a href="shop.html" class="nav-link">Shop</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="success-container">
            <i class="fas fa-check-circle"></i>
            <h1>Pesanan Berhasil Dibuat!</h1>
            <p>Terima kasih atas pesanan Anda. Kami akan segera memprosesnya.</p>

            <div class="order-details">
                <h3 style="margin-top: 0; color: #1c7430;">Detail Pembayaran</h3>

                <p><strong>Nomor Pesanan:</strong> <span id="final-order-number">BMINT-XXXX</span></p>
                <p><strong>Metode Pembayaran:</strong> <span id="final-method">Memuat...</span></p>
                <p><strong>Total Pembayaran:</strong> <span id="final-total" class="highlight-total">Rp 0</span></p>

                <div id="payment-code-detail">
                    <p style="text-align:center;">Memuat instruksi pembayaran...</p>
                </div>

                <p style="font-size:0.9em; color:#666; margin-top:15px;">
                    Anda akan menerima email konfirmasi segera.
                </p>
            </div>

            <a href="index.html" class="button btn-primary" style="margin-top:30px; text-decoration:none;">
                Kembali ke Home
            </a>
        </section>
    </main>


    <script>

        function formatRupiah(number) {
            return new Intl.NumberFormat("id-ID", {
                style: "currency",
                currency: "IDR",
                minimumFractionDigits: 0
            }).format(number || 0);
        }

        function generatePaymentInstruction(method) {
            if (method === "transfer") {
                return `
                    <p style="margin:0; font-weight:bold;">Transfer Bank:</p>

                    <h4 style="margin:5px 0; color:#1c7430;">BCA: 8899 0088 1234 5678</h4>
                    <p style="margin:0; font-size:0.9em;">a/n PT Bluemint Jaya</p>

                    <h4 style="margin:10px 0 0; color:#1c7430;">Mandiri: 1234 5678 9012</h4>
                    <p style="margin:0; font-size:0.9em;">a/n Marsha Amalia</p>

                    <p style="font-size:0.9em; margin-top:10px;">Bayar dalam 24 jam.</p>
                `;
            }

            if (method === "e-wallet") {
                return `
                    <p style="margin:0; font-weight:bold;">Pembayaran E-Wallet:</p>
                    <h4 style="margin:5px 0; color:#1c7430;">GoPay / Dana: 0878-xxxx-xxxx</h4>
                    <p style="font-size:0.9em;">Selesaikan pembayaran via aplikasi.</p>
                `;
            }

            if (method === "cod") {
                return `
                    <p style="margin:0; font-weight:bold;">Bayar di Tempat:</p>
                    <h4 style="margin:5px 0; color:#1c7430;">Pembayaran Tunai</h4>
                    <p style="font-size:0.9em;">Siapkan uang pas saat kurir datang.</p>
                `;
            }

            return `<p style="color:red;">Metode tidak valid.</p>`;
        }

        document.addEventListener("DOMContentLoaded", () => {
            const params = new URLSearchParams(window.location.search);

            const total = parseFloat(params.get("total")) || 0;
            const method = params.get("method") || "unknown";

            document.getElementById("final-total").textContent = formatRupiah(total);

            const methodNames = {
                "transfer": "Transfer Bank (BCA/Mandiri)",
                "e-wallet": "E-Wallet (GoPay/Dana)",
                "cod": "Bayar di Tempat (COD)"
            };

            document.getElementById("final-method").textContent =
                methodNames[method] || "Tidak Dikenal";

            document.getElementById("payment-code-detail").innerHTML =
                generatePaymentInstruction(method);

            const d = new Date();
            const dateCode = d.toISOString().slice(2, 10).replace(/-/g, "");
            const unique = d.getTime().toString().slice(-4);

            document.getElementById("final-order-number").textContent =
                `BMINT-${dateCode}-${unique}`;

            sessionStorage.removeItem("buyNowItem");

            if (method !== "cod") {
                localStorage.removeItem("cartItems");
            }
        });

        const navMenu = document.querySelector(".nav-menu");
        document.getElementById("menu-open-button").onclick = () => navMenu.classList.add("active");
        document.getElementById("menu-close-button").onclick = () => navMenu.classList.remove("active");
    </script>

</body>
</html>
